<!doctype html>
<html lang="fr-FR">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <meta name="robots" content="noindex, nofollow" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.4.1/semantic.min.css" rel="stylesheet">
        <style>
            body > .ui.container {
                margin-bottom: 50px;
            }
            .segment > p {
                line-height: 2.3em;
            }
        </style>
    </head>
    <body>
        <div class="ui container">

            <h1 class="ui centered header">Quelle semaine sommes-nous ?</h1>

            <div class="ui negative icon message">
                <i class="fire icon"></i>
                <div class="content">
                    <div class="header">
                        Obsolète
                    </div>
                    <div>Cette page est obsolète dû aux recommandations liées au déconfinement.</div>
                    <div>
                        Le formulaire d'inscription ainsi que les horaires d'ouvertures, sont disponibles ici: <a href="https://gemletremplin.fr/inscription/">gemletremplin.fr/inscription</a>.
                    </div>
                </div>
            </div>

            <div class="ui doubling one column grid">
                <div class="column">
                    <div class="ui blue segment thisWeek">
                        <h2 class="ui header">Semaine <span class="weekNumber"></span></h2>
                        <p>
                            Ce <span class="ui blue basic label">jeudi</span>, le gem ouvrira à <span class="ui basic label thursdayTime"></span>.
                        </p>
                        <div class="ui inverted divider"></div>
                        <p>
                            Ce <span class="ui blue basic label">samedi</span>, le gem sera <span class="ui basic label saturdayStatus"></span>.
                        </p>
                    </div>
                </div>
                <div class="column">
                    <div class="ui segment nextWeek">
                        <h2 class="ui header">Semaine <span class="weekNumber"></span></h2>
                        <p>
                            Le <span class="ui blue basic label">jeudi</span> de la semaine prochaine, le gem ouvrira à <span class="ui basic label thursdayTime"></span>.
                        </p>
                        <div class="ui inverted divider"></div>
                        <p>
                            Le <span class="ui blue basic label">samedi</span> de la semaine prochaine, le gem sera <span class="ui basic label saturdayStatus"></span>
                        </p>
                    </div>
                </div>
            </div>

            <div class="ui basic segment">
                <img class="ui centered rounded image" src="https://cataas.com/cat">
            </div>

        </div>
    </body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.25.3/moment-with-locales.min.js"></script>
    <script>
        moment.locale("fr");

        function getWeek(now) {
            let dateRef = moment([2019, 7, 19]).startOf("week"); // Semaine 1
            let dateCurrentWeek = moment(now).startOf("week");
            let weekDiff = parseInt(moment.duration(dateCurrentWeek.diff(dateRef)).asWeeks());
            return (weekDiff % 3) + 1;
        }

        function getWeekData(week) {
            let thursdayTime;
            let saturdayStatus;

            switch (week) {
                case 1:
                    thursdayTime = "10h";
                    saturdayStatus = "ouvert";
                    break;
                case 2:
                    thursdayTime = "10h";
                    saturdayStatus = "fermé";
                    break;
                case 3:
                    thursdayTime = "11h";
                    saturdayStatus = "ouvert";
                    break;
                default:
                    break;
            }

            return {week: week, thursdayTime: thursdayTime, saturdayStatus: saturdayStatus};
        }

        function populateData(el, data) {
            let saturdayStatusEl = el.getElementsByClassName("saturdayStatus")[0];
            let thursdayTimeEl = el.getElementsByClassName("thursdayTime")[0];

            el.getElementsByClassName("weekNumber")[0].innerHTML = data.week;

            thursdayTimeEl.innerHTML = data.thursdayTime;
            thursdayTimeEl.classList.add((data.thursdayTime == '10h') ? 'blue' : 'orange')

            saturdayStatusEl.innerHTML = data.saturdayStatus;
            saturdayStatusEl.classList.add((data.saturdayStatus == 'ouvert') ? 'blue' : 'red');
        }

        let data = getWeekData(getWeek());
        let thisWeekEl = document.getElementsByClassName("thisWeek")[0];
        populateData(thisWeekEl, data);

        let nextData = getWeekData(getWeek(moment().add(1, "week").startOf("week")));
        let nextWeekEl = document.getElementsByClassName("nextWeek")[0];
        populateData(nextWeekEl, nextData);
    </script>
</html>